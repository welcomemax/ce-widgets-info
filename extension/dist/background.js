!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=29)}({20:function(t,e){chrome.storage.sync.set({apps:function(t){return t.map(function(t){return{name:t.name,slug:t.slug,func:t.func,aliases:t.aliases?t.aliases.concat([t.slug,t.name]):[t.slug,t.name],type:"",version:{curr:!1,last:t.version?t.version:"1.0.0"}}})}([{slug:"instagram-feed",name:"Instagram Feed",func:"EappsInstagramFeed",aliases:["instagramfeed","instashow"]},{slug:"instalink",name:"Instagram Widget",func:"instalink"},{slug:"instagram-testimonials",name:"Instagram Testimonials",func:"EappsInstagramTestimonials"},{slug:"yottie",name:"Yottie",func:"yottie"},{slug:"google-maps",name:"Google Maps",func:"EappsGoogleMaps"},{slug:"pricing-table",name:"Pricing Table",func:"EappsPricingTable"},{slug:"social-icons",name:"Social Media Icons",func:"EappsMediaIcons"},{slug:"social-share-buttons",name:"Social Share Buttons",func:"EappsSocialShareButtons"},{slug:"facebook-feed",name:"Facebook Feed",func:"EappsFacebookFeed"},{slug:"facebook-comments",name:"Facebook Comments",func:"EappsFacebookComments"},{slug:"facebook-like-button",name:"Facebook Like Button",func:"EappsFacebookLikeButton"},{slug:"facebook-share-button",name:"Facebook Share Button",func:"EappsFacebookShareButton"},{slug:"testimonials-slider",name:"TestimonialsSlider",func:"EappsTestimonialsSlider"},{slug:"faq",name:"FAQ",func:"EappsFaq"},{slug:"contact-form",name:"Contact Form",func:"EappsContactForm"},{slug:"form-builder",name:"Form Builder",func:"EappsFormBuilder"}])},function(){})},29:function(t,e,s){"use strict";s.r(e);s(20);class a{constructor(){}postMessageFactory(t){t&&t.method&&(t.data?this[t.method](t.data):this[t.method]())}getQueryParam(t,e){t=t.replace(/[\[\]]/g,"\\$&");let s=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}}new class{constructor(){this.storedWidgetsData={},this.widgetsData=[],this.sites={},this.tabs={},this.tab={},this.tab_port=null,this.popup_port=null,this.utils=new a,this.init()}init(){chrome.extension.onConnect.addListener(e=>{this.popup_port=e,this.popup_port.onMessage.addListener(t)}),chrome.tabs.onUpdated.addListener((e,s,a)=>{if(s&&s.status&&"complete"===s.status.toLowerCase()){if(!(e&&a&&a.url&&a.url.indexOf("http")+1))return;this.tab=a,this.tab.site=a.url.match(/^(?:https?:)?(?:\/\/)?(?:w+\.)?([^\/\?]+)/)[1],this.tabs[a.id]||(this.tabs[a.id]={id:a.id,site:a.site,url:a.url,title:a.title,favIconUrl:a.favIconUrl}),this.sites[a.site]||(this.sites[a.site]={site:a.site,pages:{}}),this.sites[a.site].pages[a.url]||(this.sites[a.site].pages[a.url]={url:a.url,widgetsData:[]}),this.tab_port=chrome.tabs.connect(this.tab.id),this.tab_port.onMessage.addListener(t),"partners.shopify.com"===this.tab.site&&this.tab.url.match(/managed_stores\/new/)&&this.message(this.tab_port,"setManagedStore",{store_url:this.utils.getQueryParam("store_url",a.url),permissions:this.utils.getQueryParam("permissions",a.url).split(","),message:this.utils.getQueryParam("message",a.url)}),this.message(this.tab_port,"getWidgetsData")}}),chrome.tabs.onActivated.addListener(t=>{this.tab=this.tabs[t.tabId],this.returnWidgetsData()});let t=t=>{t&&t.method&&(t.data?this[t.method](t.data):this[t.method]())}}setBadge(t){console.log(t),chrome.browserAction.setBadgeText({text:t?t.toString():""}),t||chrome.browserAction.setBadgeBackgroundColor({color:"#38393a"})}returnWidgetsData(t){t&&this.storeWidgetsData(t),this.tab&&this.storedWidgetsData[this.tab.id]?(this.widgetsData=this.storedWidgetsData[this.tab.id],this.setBadge(this.storedWidgetsData[this.tab.id].length)):(this.widgetsData=[],this.setBadge(0)),this.popup_port&&this.message(this.popup_port,"setWidgetsData",this.widgetsData)}message(t,e,s){let a={method:e};s&&(a.data=s),t.postMessage(a)}requestWidgetsData(){this.message(this.popup_port,"setWidgetsData",this.widgetsData)}storeWidgetsData(t){this.storedWidgetsData[this.tab.id]=t}}}});